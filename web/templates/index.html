<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kuma blog</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-main: #181818;       
            --bg-secondary: #262626;  
            --text-main: #d5d5d5;     
            --text-muted: #939598;    
            --accent: #a882ff;        
            --accent-hover: #bfa3ff;  
        }

        * { box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg-main); 
            color: var(--text-main);
            line-height: 1.7; 
            margin: 0; padding: 0;
            -webkit-font-smoothing: antialiased;
        }

        a { text-decoration: none; color: inherit; transition: 0.2s; }
        
        /* --- HEADER --- */
        .site-header {
            width: 100%;
            background-color: var(--bg-secondary); 
            border-bottom: 1px solid #2f2f2f; 
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .header-inner {
            width: 100%;
            max-width: 100%; 
            padding: 15px 40px; 
            display: flex;
            justify-content: space-between; /* Logo Kiri, Profil Kanan (Paling Aman) */
            align-items: center;
        }

        .container {
            max-width: 720px; 
            margin: 0 auto;
            padding: 40px 24px; 
        }

        /* LOGO KUMA (KIRI) */
        .header-identity { 
            display: flex; 
            align-items: center; 
            gap: 15px;
            /* HAPUS margin-left: 400px biar gak ancur pas di-zoom */
        }
        
        .brand { display: flex; flex-direction: column; gap: 0px; }
        .brand h1 { font-family: 'JetBrains Mono', monospace; font-size: 1rem; font-weight: 700; margin: 0; color: #fff; }
        .brand .tagline { font-size: 0.7rem; color: var(--text-muted); font-style: italic; }

        /* NAVIGASI KANAN (PROFILE) */
        .nav-links {
            display: flex; 
            align-items: center;
            gap: 20px;
            font-family: 'JetBrains Mono', monospace; 
            font-size: 0.8rem;
        }
        .nav-links a:hover { color: var(--accent); text-decoration: underline; }

        /* FOTO PROFILE DI KANAN */
        .nav-profile { display: flex; align-items: center; gap: 12px; }
        
        .header-avatar-img {
            width: 32px; 
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: none;
            outline: none; 
            transition: transform 0.2s;
        }
        .header-avatar-img:hover { transform: scale(1.1); cursor: pointer; }

        /* --- ACTION BAR & POST LIST --- */
        .action-bar { margin-bottom: 30px; }
        
        .btn-create {
            display: inline-flex; align-items: center; gap: 8px;
            font-family: 'JetBrains Mono', monospace; color: var(--accent);
            font-size: 0.9rem; padding: 10px 16px;
            background: var(--bg-secondary);
            border-radius: 4px; border: none; 
            white-space: nowrap; /* Biar teks gak turun ke bawah */
        }
        .btn-create:hover { background: #333; }

        .post-list { display: flex; flex-direction: column; gap: 30px; }

        .post-item { 
            display: block; 
            background-color: var(--bg-secondary); 
            border: none; 
            border-radius: 4px; 
            overflow: hidden; 
            transition: transform 0.2s ease;
            cursor: pointer; 
        }

        .post-item:hover { 
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .post-header-area {
            background-color: transparent; 
            padding: 12px 20px;
            display: flex; align-items: center; gap: 12px;
        }

        .post-content-area {
            background-color: transparent; 
            padding: 10px 20px 24px 20px; 
        }

        .post-footer-area {
            background-color: transparent; 
            padding: 10px 20px;
            display: flex; justify-content: flex-end; 
        }

        .author-avatar {
            width: 32px; height: 32px;
            border-radius: 50%; background-color: #333; 
            object-fit: cover; border: none; 
        }

        .post-meta-text { display: flex; flex-direction: column; line-height: 1.2; }
        
        .author-name { 
            font-size: 0.85rem; font-weight: 700; color: #fff; 
            position: relative; z-index: 2; 
        }
        .author-name:hover { color: var(--accent); text-decoration: underline; }

        .post-date { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--text-muted); }
        .post-title { font-size: 1.4rem; font-weight: 700; margin: 0 0 10px 0; color: #fff; letter-spacing: -0.5px; }
        .post-preview { color: #b0b3b8; font-size: 0.95rem; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; margin: 0; }
        .read-more { display: inline-block; font-size: 0.8rem; color: var(--accent); font-weight: 600; font-family: 'JetBrains Mono', monospace; }

        footer { margin-top: 80px; padding-top: 40px; border-top: 1px solid #2f2f2f; text-align: center; color: var(--text-muted); font-size: 0.8rem; font-family: 'JetBrains Mono', monospace; }
    </style>
</head>
<body>

   <header class="site-header">
        <div class="header-inner">
            
            <div class="header-identity">
                <div class="brand">
                    <h1>ʕ •ᴥ•ʔ kuma-blog くまーブログ.md</h1>
                    <span class="tagline">俺の”ア”女性はかわいすぎて怒ってる猫みたい</span>
                </div>
            </div>

            <nav class="nav-links">
                {{ if .IsLoggedIn }}
                    <div class="nav-profile">
                        <a href="/profile" title="My Profile">
                            {{ if .UserAvatar }}
                                <img src="{{ .UserAvatar }}" alt="Profile" class="header-avatar-img">
                            {{ else }}
                                <div class="header-avatar-img" style="background:#444; display:flex; align-items:center; justify-content:center; color:#fff;">?</div>
                            {{ end }}
                        </a>
                        <a href="/auth/logout" style="font-size: 0.75rem; color: #666; margin-left: 5px;">[ x ]</a>
                    </div>
                {{ else }}
                    <a href="/login">[ Login ]</a>
                {{ end }}
            </nav>
        </div>
    </header>

    <div class="container">
        
        <div class="action-bar" style="display: flex; gap: 20px; align-items: center;">
            <a href="/create" class="btn-create">
                <span>+</span> New Entry / 新しい日記
            </a>

            <form action="/" method="GET" style="flex-grow: 1;">
                <input type="text" 
                       name="search" 
                       placeholder="Search title, content, or writer..." 
                       autocomplete="off"
                       style="
                           width: 100%;
                           background: transparent;
                           border: none;
                           border-bottom: 1px solid #333;
                           color: #d5d5d5;
                           font-family: 'JetBrains Mono', monospace;
                           font-size: 0.9rem;
                           padding: 8px 0;
                           outline: none;
                       "
                >
            </form>
        </div>

        <div class="post-list">
            {{ range .Posts }}
            <article class="post-item" onclick="location.href='/post?id={{ .ID }}'">
                
                <div class="post-header-area">
                    {{ if .User.Avatar }}
                        <img src="{{ .User.Avatar }}" alt="{{ .User.Name }}" class="author-avatar">
                    {{ else }}
                        <div class="author-avatar" style="display: flex; align-items: center; justify-content: center; color: #777; font-size: 0.8rem;">?</div>
                    {{ end }}
                    
                    <div class="post-meta-text">
                        {{ if .User.Name }}
                            <a href="/profile?id={{ .User.ID }}" class="author-name" onclick="event.stopPropagation()">{{ .User.Name }}</a>
                        {{ else }}
                            <span class="author-name">Ghost Writer</span>
                        {{ end }}
                        <span class="post-date">{{ .CreatedAt.Format "02 Jan 2006" }}</span>
                    </div>
                </div>

                <div class="post-content-area">
                    <h2 class="post-title">{{ .Title }}</h2>
                    <p class="post-preview">{{ .Content }}</p>
                </div>

                <div class="post-footer-area">
                    <span class="read-more">Read log -></span>
                </div>
            </article>
            {{ else }}
                <div style="text-align: center; color: var(--text-muted); margin-top: 50px;">
                    <p style="font-family: 'JetBrains Mono', monospace;">> No logs found. System empty.</p>
                </div>
            {{ end }}
        </div>

        <footer>
            <p>Built with Go & words by neval</p>
        </footer>
    </div>

</body>
</html>